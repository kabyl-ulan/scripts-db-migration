import{c as q,t as C,r as m,v as M,u as k,e as d,F as U,j as n,d0 as R,B,x as T,bL as F,bT as S,cT as z,d1 as H,d2 as j}from"./index.dc8861ba.js";import{u as V}from"./index.aff3ea0a.js";import{C as P}from"./index.2ee5d23d.js";import{F as A}from"./index.183fa59f.js";/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],re=q("square-pen",G);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const L={getAllCountries:()=>"/country/all-list",updateCountry:e=>`/country/update/${e}`};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ne=async()=>{var e;try{return await C.get(L.getAllCountries())}catch(t){return(e=t==null?void 0:t.response)==null?void 0:e.data}},J=async(e,t)=>{var a;try{return await C.put(L.updateCountry(e),t)}catch(c){return(a=c==null?void 0:c.response)==null?void 0:a.data}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ie=({country:e,open:t,onClose:a,onSuccess:c})=>{const[b,g]=m.exports.useState(!1),h=M(),{t:s}=k("tables"),[i,_]=m.exports.useState({country:"",country_en:"",agreement:"",agreement_year:"",abroad:""}),[r,u]=m.exports.useState({country:!1,country_en:!1,agreement:!1,agreement_year:!1,abroad:!1});m.exports.useEffect(()=>{e&&t&&(_({country:e.country,country_en:e.country_en,agreement:e.agreement?"yes":"no",agreement_year:e.agreement_year||"",abroad:e.far_abroad&&!e.near_abroad?"far":!e.far_abroad&&e.near_abroad?"near":"none"}),u({country:!1,country_en:!1,agreement:!1,agreement_year:!1,abroad:!1}))},[e,t]);const v=(o,f)=>{_(w=>({...w,[o]:f})),u(w=>({...w,[o]:!1}))},E=()=>{const o={country:!i.country.trim(),country_en:!i.country_en.trim(),agreement:!i.agreement,agreement_year:i.agreement==="yes"&&(!i.agreement_year||!/^\d{4}$/.test(i.agreement_year)),abroad:!i.abroad};return u(o),!Object.values(o).some(f=>f)},D=async()=>{if(!e||!E())return;g(!0);const o={country:i.country,country_en:i.country_en,agreement:i.agreement==="yes",agreement_year:i.agreement==="yes"?i.agreement_year:null,far_abroad:i.abroad==="far",near_abroad:i.abroad==="near"};try{const f=await J(e.id_country,o);f&&!f.error?(h.openNotification({message:f==null?void 0:f.message,type:"success"}),c(),a()):h.openNotification({message:f==null?void 0:f.message,type:"error"})}catch{h.openNotification({message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0438 \u0441\u0442\u0440\u0430\u043D\u044B",type:"error"})}finally{g(!1)}},l=()=>{_({country:"",country_en:"",agreement:"",agreement_year:"",abroad:""}),u({country:!1,country_en:!1,agreement:!1,agreement_year:!1,abroad:!1}),a()};return d(U,{children:[h.contextHolder,n(R,{title:n("span",{className:"font-montserrat font-semibold text-lg text-[#0e142f]",children:e==null?void 0:e.country}),open:t,onCancel:l,width:800,destroyOnClose:!0,footer:n("div",{className:"flex justify-end gap-3 pt-4",children:n(B,{type:"primary",onClick:D,loading:b,className:"bg-[#1567DA] hover:!bg-orange border-none h-10 px-6 font-montserrat font-semibold",children:s("cm:actions.save")})}),children:d("div",{className:"mon-country-select space-y-4 mt-6",children:[d("div",{children:[d("span",{className:"font-montserrat font-semibold text-sm leading-[17px] text-[#0e142f] block mb-1",children:["\u0421\u0442\u0440\u0430\u043D\u0430 ",n("span",{className:"text-orange ml-1",children:"*"})]}),n(T,{value:i.country,onChange:o=>v("country",o.target.value),placeholder:"",status:r.country?"error":""})]}),d("div",{children:[d("span",{className:"font-montserrat font-semibold text-sm leading-[17px] text-[#0e142f] block mb-1",children:["Country ",n("span",{className:"text-orange ml-1",children:"*"})]}),n(T,{value:i.country_en,onChange:o=>v("country_en",o.target.value),placeholder:"",className:`h-10 ${r.country_en?"border-red-500":""}`,status:r.country_en?"error":""})]}),d("div",{children:[d("span",{className:"font-montserrat font-semibold text-sm leading-[17px] text-[#0e142f] block mb-1",children:[s("tables.agreement")," ",n("span",{className:"text-orange ml-1",children:"*"})]}),n(F,{value:i.agreement||void 0,onChange:o=>v("agreement",o),placeholder:"",className:"w-full [&_.ant-select-selector]:!border-[#D0D5DD] [&_.ant-select-selector]:!shadow-none",status:r.agreement?"error":"",options:[{value:"yes",label:s("tables.yes")},{value:"no",label:s("tables.no")}]})]}),i.agreement==="yes"&&d("div",{children:[d("span",{className:"font-montserrat font-semibold text-sm leading-[17px] text-[#0e142f] block mb-1",children:[s("tables.yearOfAgreement")," ",n("span",{className:"text-orange ml-1",children:"*"})]}),n(T,{value:i.agreement_year,onChange:o=>v("agreement_year",o.target.value),placeholder:"",maxLength:4,className:`h-10 ${r.agreement_year?"border-red-500":""}`,status:r.agreement_year?"error":""})]}),d("div",{children:[d("span",{className:"font-montserrat font-semibold text-sm leading-[17px] text-[#0e142f] block mb-1",children:[s("tables.farAbroad")," /",s("tables.nearAbroad")," ",n("span",{className:"text-orange ml-1",children:"*"})]}),n(F,{value:i.abroad||void 0,onChange:o=>v("abroad",o),placeholder:"",className:"w-full [&_.ant-select-selector]:!border-[#D0D5DD] [&_.ant-select-selector]:!shadow-none",status:r.abroad?"error":"",options:[{value:"none",label:"---"},{value:"far",label:s("tables.farAbroad")},{value:"near",label:s("tables.nearAbroad")}]})]})]})})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const x={getAllUniversities:e=>`/university/list?lang=${e}`,updateUniversity:e=>`/university/update/${e}`,getResponsibleUniversities:()=>"/users/responsible-universities",createResponsibleUniversity:()=>"/users/responsible-universities",updateResponsibleUniversity:()=>"/users/responsible-universities",deleteResponsibleUniversity:e=>`/users/responsible-universities/${e}`};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const K=async e=>{var t;try{return await C.get(x.getAllUniversities(e))}catch(a){return(t=a==null?void 0:a.response)==null?void 0:t.data}},I=async(e,t)=>{var a;try{return await C.put(x.updateUniversity(e),t)}catch(c){return(a=c==null?void 0:c.response)==null?void 0:a.data}},Q=async()=>{var e;try{return await C.get(x.getResponsibleUniversities())}catch(t){return(e=t==null?void 0:t.response)==null?void 0:e.data}},W=async e=>{var t;try{return await C.post(x.createResponsibleUniversity(),e)}catch(a){return(t=a==null?void 0:a.response)==null?void 0:t.data}},X=async e=>{var t;try{return await C.put(x.updateResponsibleUniversity(),e)}catch(a){return(t=a==null?void 0:a.response)==null?void 0:t.data}},Y=async e=>{var t;try{return await C.delete(x.deleteResponsibleUniversity(e))}catch(a){return(t=a==null?void 0:a.response)==null?void 0:t.data}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const $=globalThis.jotaiAtomCache.get("/home/ku01/mon/edugate/front/src/entities/mon/university/model/atoms.ts/universitiesAtom",S(null));$.debugLabel="universitiesAtom";const O=globalThis.jotaiAtomCache.get("/home/ku01/mon/edugate/front/src/entities/mon/university/model/atoms.ts/responsibleUniversitiesAtom",S(null));O.debugLabel="responsibleUniversitiesAtom";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Z=e=>{const[t,a]=z($),[c,b]=m.exports.useState(!1),[g,h]=m.exports.useState(null),s=m.exports.useCallback(async()=>{var _;b(!0),h(null);try{const r=await K(e);(r==null?void 0:r.data)&&Array.isArray(r.data)?a(r.data):(_=r==null?void 0:r.data)!=null&&_.data?a(r.data.data):a([])}catch(r){console.error("Error fetching universities:",r),h("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0443\u043D\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u043E\u0432"),a([])}finally{b(!1)}},[a,e]),i=m.exports.useCallback(async(_,r)=>{b(!0),h(null);try{const u=await I(_,r);return u&&!u.error?(a(null),await s(),{success:!0,message:u.message||"\u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D"}):(h("\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u0443\u043D\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0430"),{success:!1,message:(u==null?void 0:u.message)||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u0443\u043D\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0430"})}catch(u){return console.error("Error updating university:",u),h("\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u0443\u043D\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0430"),{success:!1,message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u0443\u043D\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0430"}}finally{b(!1)}},[s,a]);return m.exports.useEffect(()=>{t===null&&s()},[t,s]),{universities:t||[],isLoading:c,error:g,fetchUniversities:s,updateUniversityData:i}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ee=()=>{const[e,t]=z(O),[a,c]=m.exports.useState(!1),[b,g]=m.exports.useState(null),h=m.exports.useCallback(async()=>{var r;c(!0),g(null);try{const u=await Q();(u==null?void 0:u.data)&&Array.isArray(u.data)?t(u.data):(r=u==null?void 0:u.data)!=null&&r.data?t(u.data.data):t([])}catch(u){console.error("Error fetching responsible universities:",u),g("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0445"),t([])}finally{c(!1)}},[t]),s=m.exports.useCallback(async r=>{c(!0),g(null);try{const u=await W(r);return u&&!u.error?(t(null),await h(),{success:!0,message:u.message||"\u041E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D"}):(g("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0433\u043E"),{success:!1,message:(u==null?void 0:u.message)||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0433\u043E"})}catch(u){return console.error("Error creating responsible:",u),g("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0433\u043E"),{success:!1,message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0433\u043E"}}finally{c(!1)}},[h,t]),i=m.exports.useCallback(async r=>{c(!0),g(null);try{const u=await X(r);return u&&!u.error?(t(null),await h(),{success:!0,message:u.message||"\u041E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D"}):(g("\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0433\u043E"),{success:!1,message:(u==null?void 0:u.message)||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0433\u043E"})}catch(u){return console.error("Error updating responsible:",u),g("\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0433\u043E"),{success:!1,message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0433\u043E"}}finally{c(!1)}},[h,t]),_=m.exports.useCallback(async r=>{c(!0),g(null);try{const u=await Y(r);return u&&!u.error?(t(null),await h(),{success:!0,message:u.message||"\u041E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D"}):(g("\u041E\u0448\u0438\u0431\u043A\u0430 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F \u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0433\u043E"),{success:!1,message:(u==null?void 0:u.message)||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F \u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0433\u043E"})}catch(u){return console.error("Error deleting responsible:",u),g("\u041E\u0448\u0438\u0431\u043A\u0430 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F \u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0433\u043E"),{success:!1,message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F \u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0433\u043E"}}finally{c(!1)}},[h,t]);return m.exports.useEffect(()=>{e===null&&h()},[e,h]),{responsibles:e||[],isLoading:a,error:b,fetchResponsibles:h,createResponsible:s,updateResponsible:i,deleteResponsible:_}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const oe=({university:e,open:t,onClose:a,onSuccess:c,regions:b})=>{const[g,h]=m.exports.useState(!1),{t:s,i18n:i}=k("vuzyModal"),_=V(),r=M(),[u,v]=m.exports.useState({university_name_ru:"",university_name_en:"",id_region:0,winter_visible:!1}),[E,D]=m.exports.useState({university_name_ru:!1,university_name_en:!1,id_region:!1});m.exports.useEffect(()=>{e&&t&&(v({university_name_ru:i.language==="ru"?e.university_name_ru:e.university_name_en,university_name_en:e.university_name_en,id_region:e.id_region,winter_visible:e.winter_visible}),D({university_name_ru:!1,university_name_en:!1,id_region:!1}))},[e,t,i.language]);const l=(p,y)=>{v(N=>({...N,[p]:y})),D(N=>({...N,[p]:!1}))},o=()=>{const p={university_name_ru:!u.university_name_ru.trim(),university_name_en:!u.university_name_en.trim(),id_region:!u.id_region||u.id_region===0};return D(p),!Object.values(p).some(y=>y)},f=async()=>{if(!e||!o())return;h(!0);const p={university_name_ru:u.university_name_ru,university_name_en:u.university_name_en,id_region:u.id_region,winter_visible:u.winter_visible};try{const y=await I(e.id_university,p);y&&!y.error?(r.openNotification({message:y==null?void 0:y.message,type:"success"}),c(),a()):r.openNotification({message:y==null?void 0:y.message,type:"error"})}catch(y){r.openNotification({message:y==null?void 0:y.message,type:"error"})}finally{h(!1)}},w=()=>{v({university_name_ru:"",university_name_en:"",id_region:0,winter_visible:!1}),D({university_name_ru:!1,university_name_en:!1,id_region:!1}),a()};return d(U,{children:[r.contextHolder,n(R,{title:n("span",{className:"font-montserrat font-semibold text-lg text-[#0e142f]",children:s("tables:vuzy.editVuz")}),open:t,onCancel:w,width:800,destroyOnClose:!0,footer:n("div",{className:"flex justify-end gap-3 pt-4",children:n(B,{type:"primary",onClick:f,loading:g,className:"bg-[#1567DA] hover:!bg-orange border-none h-10 px-6 font-montserrat font-semibold",children:s("cm:actions.save")})}),children:d("div",{className:"mon-country-select space-y-4 mt-6",children:[d("div",{children:[d("span",{className:"font-montserrat font-semibold text-sm leading-[17px] text-[#0e142f] block mb-1",children:[s("tables:vuzy.name")," ",n("span",{className:"text-orange ml-1",children:"*"})]}),n(T,{value:i.language==="ru"?u.university_name_ru:u.university_name_en,onChange:p=>l(i.language==="ru"?"university_name_ru":"university_name_en",p.target.value),placeholder:s("tables:vuzy.name")||"",className:`h-10 ${E.university_name_ru?"border-red-500":""}`,status:E.university_name_ru?"error":""})]}),d("div",{children:[d("span",{className:"font-montserrat font-semibold text-sm leading-[17px] text-[#0e142f] block mb-1",children:[s("tables:vuzy.region")," ",n("span",{className:"text-orange ml-1",children:"*"})]}),n(F,{value:u.id_region||void 0,onChange:p=>l("id_region",p),placeholder:i.language==="ru"?"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0435\u0433\u0438\u043E\u043D":"Select region",className:"w-full [&_.ant-select-selector]:!border-[#D0D5DD] [&_.ant-select-selector]:!shadow-none",status:E.id_region?"error":"",options:_?_.map(p=>({value:p.id_region,label:p.region})):[]})]}),d("div",{className:"flex items-center gap-2",children:[n(P,{checked:u.winter_visible,onChange:p=>l("winter_visible",p.target.checked)}),d("span",{className:"font-montserrat font-semibold text-sm leading-[17px] text-[#0e142f]",children:[s("tables:vuzy.winterAdmission")," ",n("span",{className:"text-orange ml-1",children:"*"})]})]})]})})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const le=({responsible:e,open:t,onClose:a,onSuccess:c})=>{const[b]=A.useForm(),[g,h]=m.exports.useState(!1),{t:s}=k("tables"),i=M(),{universities:_}=Z(),{createResponsible:r,updateResponsible:u}=ee(),v=!!e;m.exports.useEffect(()=>{t&&e?b.setFieldsValue({id_university:e.id_university,users_fio:e.users_fio,logins:e.logins,passwords:e.passwords,pin:e.pin,telefon:e.telefon,email:e.email}):t&&!e&&b.resetFields()},[t,e,b]);const E=async()=>{try{const l=await b.validateFields();h(!0);let o;v&&e?o=await u({id_users:e.id_users,id_university:l.id_university,users_fio:l.users_fio,logins:l.logins,passwords:l.passwords,pin:l.pin||null,telefon:l.telefon||null,email:l.email||null}):o=await r({id_university:l.id_university,users_fio:l.users_fio,logins:l.logins,passwords:l.passwords,pin:l.pin||null,telefon:l.telefon||null,email:l.email||null}),o.success?(i.openNotification({message:o.message,type:"success"}),c(),a(),b.resetFields()):i.openNotification({message:o.message,type:"error"})}catch(l){console.error("Validation failed:",l)}finally{h(!1)}},D=()=>{b.resetFields(),a()};return d(R,{title:s(v?"vuzy.editResponsible":"vuzy.addResponsible"),open:t,onOk:E,onCancel:D,confirmLoading:g,okText:s(v?"cm:actions.save":"cm:actions.add"),cancelText:s("cm:actions.cancel"),width:800,footer:[n("button",{onClick:E,disabled:g,className:"px-4 py-2 bg-blue-600 text-white rounded-[20px] hover:bg-orange border-none cursor-pointer",children:s(g?"site:loading":v?"cm:actions.save":"cm:actions.add")},"submit")],children:[i.contextHolder,d(A,{form:b,layout:"vertical",className:"mt-4",children:[n(A.Item,{name:"id_university",label:s("vuzy.university"),rules:[{required:!0,message:s("vuzy.universityCheck")||""}],children:n(H,{placeholder:s("vuzy.universityCheck"),showSearch:!0,filterOption:(l,o)=>{var f;return((f=o==null?void 0:o.label)!=null?f:"").toLowerCase().includes(l.toLowerCase())},options:_.map(l=>({value:l.id_university,label:l.university_name_ru})),className:"[&_.ant-select-selector]:!border-[#d9d9d9] [&_.ant-select-focused_.ant-select-selector]:!border-[#4096ff] [&_.ant-select-focused_.ant-select-selector]:!shadow-[0_0_0_2px_rgba(5,145,255,0.1)]"})}),n(A.Item,{name:"users_fio",label:s("vuzy.fioResponsible"),rules:[{required:!0,message:s("vuzy.fioResponsible")||""}],children:n(j,{})}),d("div",{className:"grid grid-cols-2 gap-x-6",children:[n(A.Item,{name:"logins",label:s("tables.login"),rules:[{required:!0,message:s("vuzy.login")||""}],children:n(j,{})}),n(A.Item,{name:"passwords",label:s("tables.password"),rules:[{required:!v,message:s("vuzy.password")||""}],children:n(j.Password,{})}),n(A.Item,{name:"telefon",label:s("tables.phone"),children:n(j,{})}),n(A.Item,{name:"email",label:s("tables.email"),rules:[{type:"email",message:s("vuzy.emailResponsible")||""}],children:n(j,{})})]})]})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};export{ie as E,re as S,oe as a,ee as b,le as c,ne as g,Z as u};
