import{dz as D,u as N,r as s,v as O,j as t,e as f,F as z,d1 as P,d2 as q}from"./index.dc8861ba.js";import{u as H,a as V}from"./index.aff3ea0a.js";import{u as $,S as B,a as G}from"./index.81aee1d4.js";import{C as J}from"./index.2ee5d23d.js";import{S as K}from"./search.158725bc.js";import{T as Q}from"./Table.fb1d6459.js";import"./index.183fa59f.js";import"./useForm.40722572.js";import"./EllipsisOutlined.5194278a.js";import"./index.3d0341d4.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,a){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,a),a)}};const ie=()=>{const{locale:n}=D(),{i18n:a}=N(),_=H(),p=V(),[F,y]=s.exports.useState([]),[c,S]=s.exports.useState([]),[o,C]=s.exports.useState("all"),{t:i}=N("tables"),[d,U]=s.exports.useState(""),[j,v]=s.exports.useState(null),[L,w]=s.exports.useState(!1),h=O(),{universities:b,isLoading:T,error:g,fetchUniversities:u,updateUniversityData:W}=$(n==="ru-RU"?"ru":"en");s.exports.useEffect(()=>{if(b.length>0){const e=b.map((r,l)=>({...r,key:String(r.id_university),number:l+1}));S(e),y(e)}},[b]),s.exports.useEffect(()=>{u()},[n,u]),s.exports.useEffect(()=>{g&&h.openNotification({message:g,type:"error"})},[g,h]),s.exports.useEffect(()=>{p({lang:a.language})},[a.language,p]);const M=s.exports.useMemo(()=>[{value:"all",label:a.language==="ru"?"\u0420\u0435\u0433\u0438\u043E\u043D":"Region",className:"text-gray-400"},..._?_.map(e=>({value:e.id_region,label:e.region})):[]],[_,a.language]),A=s.exports.useMemo(()=>Array.from(new Map(c.map(e=>[e.id_region,{id_region:e.id_region,region_ru:e.region_ru}])).values()),[c]);s.exports.useEffect(()=>{let e=c;if(o!=="all"&&(e=e.filter(l=>l.id_region===o)),d.trim()){const l=d.toLowerCase(),x=n==="ru-RU"?"university_name_ru":"university_name_en";e=e.filter(m=>{var k;return((k=m[x])==null?void 0:k.toLowerCase().includes(l))||m.university_name_ru.toLowerCase().includes(l)||m.university_name_en.toLowerCase().includes(l)})}const r=e.map((l,x)=>({...l,number:x+1}));y(r)},[o,d,c,n,[]]);const R=[{title:t("h2",{className:"text-black text-xs font-semibold",children:"\u2116"}),dataIndex:"number",width:60,align:"center",fixed:"left",render:e=>t("span",{className:"text-black text-sm",children:e})},{title:t("h2",{className:"text-black text-xs font-semibold",children:i("tables.region")}),dataIndex:a.language==="ru"?"region_ru":"region_en",width:180,fixed:"left",render:(e,r)=>t("span",{className:"text-black text-sm",children:a.language==="ru"?r.region_ru:r.region_en})},{title:t("h2",{className:"text-black text-xs font-semibold",children:i("tables.name")}),dataIndex:a.language==="ru"?"university_name_ru":"university_name_en",width:400,render:(e,r)=>t("span",{className:"text-black text-sm font-medium",children:a.language==="ru"?r.university_name_ru:r.university_name_en})},{title:t("h2",{className:"text-black text-xs font-semibold",children:i("tables.winterAdmission")}),dataIndex:"winter_visible",width:120,align:"center",render:e=>t(J,{checked:e,disabled:!0})},{title:t("h2",{className:"text-black text-xs font-semibold",children:i("tables.action")}),width:100,align:"center",fixed:"right",render:(e,r)=>t("button",{className:"text-green hover:text-green border-none bg-transparent cursor-pointer p-1 inline-flex items-center justify-center transition-colors",onClick:()=>{v(r),w(!0)},children:t(B,{className:"w-5 h-5"})})}],E=()=>{w(!1),v(null)},I=()=>{u()};return f(z,{children:[h.contextHolder,t(G,{university:j,open:L,onClose:E,onSuccess:I,regions:A}),f("div",{className:"bg-white rounded-lg shadow-sm",children:[t("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-200",children:t("h1",{className:"text-xl font-semibold text-gray-800",children:i("tables.listOfUniversities")})}),f("div",{className:"px-6 flex gap-6 justify-between",children:[t("div",{className:"w-full",children:t(P,{value:o,onChange:C,options:M,className:`w-full [&_.ant-select-selector]:!h-10 [&_.ant-select-selector]:!py-1.5 [&_.ant-select-selector]:!border-gray [&_.ant-select-arrow]:!-translate-y-[-5px] [&_.ant-select-arrow]:!text-base ${o==="all"?"[&_.ant-select-selection-item]:!text-[#9ca3af]":"[&_.ant-select-selection-item]:!text-[#1f2937]"}`})}),t("div",{className:"w-full",children:t(q,{placeholder:i("tables.searchUniversity")||"",value:d,onChange:e=>U(e.target.value),prefix:t(K,{className:"w-4 h-4 text-gray-400"}),className:"h-10"})})]}),t("div",{className:"p-6",children:t(Q,{columns:R,dataSource:F,loading:T,pagination:!1,scroll:{y:"calc(100vh)"},bordered:!1,size:"small",className:"[&_.ant-table]:text-[13px] [&_.ant-table-thead_>_tr_>_th]:!bg-[#F5F6F8] [&_.ant-table-thead_>_tr_>_th]:!text-gray-500 [&_.ant-table-thead_>_tr_>_th]:!font-semibold [&_.ant-table-thead_>_tr_>_th]:!border-0 [&_.ant-table-thead_>_tr_>_th]:!py-5 [&_.ant-table-thead_>_tr_>_th]:!px-4 [&_.ant-table-thead_>_tr_>_th]:!text-xs [&_.ant-table-tbody_>_tr_>_td]:!px-4 [&_.ant-table-tbody_>_tr_>_td]:!border-0 [&_.ant-table-tbody_>_tr_>_td]:!text-gray-700 [&_.ant-table-tbody_>_tr:nth-child(odd)_>_td]:!bg-[#F5F6F8] [&_.ant-table-tbody_>_tr:nth-child(even)_>_td]:!bg-white [&_.ant-table-tbody_>_tr:hover_>_td]:!bg-gray-50 [&_.ant-table-cell-fix-left]:!bg-inherit [&_.ant-table-cell-fix-right]:!bg-inherit [&_.ant-table-thead_.ant-table-cell-fix-left]:!bg-[#F5F6F8] [&_.ant-table-thead_.ant-table-cell-fix-right]:!bg-[#F5F6F8] [&_.ant-table-tbody_>_tr:nth-child(odd)_.ant-table-cell-fix-left]:!bg-[#F5F6F8] [&_.ant-table-tbody_>_tr:nth-child(even)_.ant-table-cell-fix-left]:!bg-white [&_.ant-table-tbody_>_tr:nth-child(odd)_.ant-table-cell-fix-right]:!bg-[#F5F6F8] [&_.ant-table-tbody_>_tr:nth-child(even)_.ant-table-cell-fix-right]:!bg-white [&_.ant-table-tbody_>_tr:hover_.ant-table-cell-fix-left]:!bg-gray-50 [&_.ant-table-tbody_>_tr:hover_.ant-table-cell-fix-right]:!bg-gray-50 [&_.ant-table-body]:[scrollbar-width:none] [&_.ant-table-body]:[-ms-overflow-style:none] [&_.ant-table-body::-webkit-scrollbar]:[display:none] [&_.ant-checkbox-wrapper]:pointer-events-none [&_.ant-checkbox-disabled_.ant-checkbox-inner]:!bg-gray-200 [&_.ant-checkbox-disabled_.ant-checkbox-inner]:!border-gray-300 [&_.ant-checkbox-checked_.ant-checkbox-inner]:!bg-gray-400 [&_.ant-checkbox-checked_.ant-checkbox-inner]:!border-gray-400"})})]})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,a){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,a),a)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(n,a){return this.cache.has(n)?this.cache.get(n):(this.cache.set(n,a),a)}};export{ie as MonVuzListPage};
