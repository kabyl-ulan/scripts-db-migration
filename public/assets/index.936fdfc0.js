import{c as A,u,r as n,v as E,j as t,e as _,F as z,d2 as y,d0 as O}from"./index.dc8861ba.js";import{b as v,S as V,c as D}from"./index.81aee1d4.js";import{S as w}from"./search.158725bc.js";import{T as U}from"./Table.fb1d6459.js";import"./index.aff3ea0a.js";import"./index.2ee5d23d.js";import"./index.183fa59f.js";import"./useForm.40722572.js";import"./EllipsisOutlined.5194278a.js";import"./index.3d0341d4.js";/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],P=A("trash-2",H);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,a){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,a),a)}};const Z=()=>{const{i18n:s}=u(),{t:a}=u("tables"),[N,p]=n.exports.useState([]),[g,F]=n.exports.useState([]),[c,C]=n.exports.useState(""),[d,T]=n.exports.useState(""),[S,h]=n.exports.useState(!1),[j,b]=n.exports.useState(null),i=E(),{responsibles:x,isLoading:R,error:m,fetchResponsibles:f}=v(),{deleteResponsible:k}=v();n.exports.useEffect(()=>{if(x.length>0){const e=x.map((l,r)=>({...l,key:String(l.id_users),number:r+1}));F(e),p(e)}},[x]),n.exports.useEffect(()=>{m&&i.openNotification({message:m,type:"error"})},[m,i]),n.exports.useEffect(()=>{let e=g;if(c.trim()){const r=c.toLowerCase();e=e.filter(o=>o.university_name.toLowerCase().includes(r))}if(d.trim()){const r=d.toLowerCase();e=e.filter(o=>o.users_fio.toLowerCase().includes(r))}const l=e.map((r,o)=>({...r,number:o+1}));p(l)},[c,d,g]),n.exports.useEffect(()=>{f()},[s.language,f]);const M=e=>{b(e),h(!0)},I=e=>{O.confirm({title:a("cm:actions.deleteResponsible"),content:`${a("cm:notify.deleteResponsibleConfirm")} "${e.users_fio}"?`,okText:a("cm:actions.delete"),okType:"danger",cancelText:a("cm:actions.cancel"),onOk:async()=>{const l=await k(e.id_users);l.success?i.openNotification({message:l.message,type:"success"}):i.openNotification({message:l.message,type:"error"})}})},L=[{title:t("h2",{className:"text-gray-600 text-xs font-semibold",children:"\u2116"}),dataIndex:"number",width:60,align:"center",fixed:"left",render:e=>t("span",{className:"text-gray-800 text-sm",children:e})},{title:t("h2",{className:"text-gray-600 text-xs font-semibold",children:a("tables.nameOrg")}),dataIndex:"university_name",width:400,fixed:"left",render:(e,l)=>t("span",{className:"text-gray-800 text-sm font-medium",children:l.university_name})},{title:t("h2",{className:"text-gray-600 text-xs font-semibold",children:a("tables.responsible")}),dataIndex:"users_fio",width:200,render:e=>t("span",{className:"text-gray-800 text-sm",children:e})},{title:t("h2",{className:"text-gray-600 text-xs font-semibold",children:a("tables.login")}),dataIndex:"logins",width:150,render:e=>t("span",{className:"text-gray-800 text-sm",children:e})},{title:t("h2",{className:"text-gray-600 text-xs font-semibold",children:a("tables.phone")}),dataIndex:"telefon",width:130,render:e=>t("span",{className:"text-gray-800 text-sm",children:e||"-"})},{title:t("h2",{className:"text-gray-600 text-xs font-semibold",children:a("tables.email")}),dataIndex:"email",width:200,render:e=>t("span",{className:"text-gray-800 text-sm",children:e||"-"})},{title:t("h2",{className:"text-gray-600 text-xs font-semibold",children:a("cm:actions.actions")}),width:100,align:"center",fixed:"right",render:(e,l)=>_("div",{className:"flex gap-2 justify-center",children:[t("button",{className:"text-green hover:text-green border-none bg-transparent cursor-pointer p-1 inline-flex items-center justify-center transition-colors",onClick:()=>M(l),children:t(V,{className:"w-5 h-5"})}),t("button",{className:"text-red hover:text-red-600 border-none bg-transparent cursor-pointer p-1 inline-flex items-center justify-center transition-colors",onClick:()=>I(l),children:t(P,{className:"w-5 h-5"})})]})}];return _(z,{children:[i.contextHolder,_("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t("h1",{className:"text-xl font-semibold text-gray-800",children:a("tables.responsibleVuz")}),_("div",{className:"py-4 flex gap-6 justify-between",children:[t("div",{className:"w-full",children:t(y,{placeholder:a("tables:vuzy.search")||"",value:c,onChange:e=>C(e.target.value),prefix:t(w,{className:"w-4 h-4 text-gray-400"}),className:"h-10"})}),t("div",{className:"w-full",children:t(y,{placeholder:a("tables:vuzy.searchResponsible")||"",value:d,onChange:e=>T(e.target.value),prefix:t(w,{className:"w-4 h-4 text-gray-400"}),className:"h-10"})}),t("button",{onClick:()=>{b(null),h(!0)},className:"px-6 py-2 bg-blue-600 text-white rounded-[20px] hover:bg-orange cursor-pointer border-none",children:a("specialty:add")})]}),t("div",{children:t(U,{columns:L,dataSource:N,loading:R,pagination:!1,scroll:{y:"calc(100vh - 320px)"},bordered:!1,size:"small",className:"[&_.ant-table]:text-[13px] [&_.ant-table-thead_>_tr_>_th]:!bg-[#F5F6F8] [&_.ant-table-thead_>_tr_>_th]:!text-gray-500 [&_.ant-table-thead_>_tr_>_th]:!font-semibold [&_.ant-table-thead_>_tr_>_th]:!border-0 [&_.ant-table-thead_>_tr_>_th]:!py-5 [&_.ant-table-thead_>_tr_>_th]:!px-4 [&_.ant-table-thead_>_tr_>_th]:!text-xs [&_.ant-table-tbody_>_tr_>_td]:!px-4 [&_.ant-table-tbody_>_tr_>_td]:!border-0 [&_.ant-table-tbody_>_tr_>_td]:!text-gray-700 [&_.ant-table-tbody_>_tr:nth-child(odd)_>_td]:!bg-[#F5F6F8] [&_.ant-table-tbody_>_tr:nth-child(even)_>_td]:!bg-white [&_.ant-table-tbody_>_tr:hover_>_td]:!bg-gray-50 [&_.ant-table-cell-fix-left]:!bg-inherit [&_.ant-table-cell-fix-right]:!bg-inherit [&_.ant-table-thead_.ant-table-cell-fix-left]:!bg-[#F5F6F8] [&_.ant-table-thead_.ant-table-cell-fix-right]:!bg-[#F5F6F8] [&_.ant-table-tbody_>_tr:nth-child(odd)_.ant-table-cell-fix-left]:!bg-[#F5F6F8] [&_.ant-table-tbody_>_tr:nth-child(even)_.ant-table-cell-fix-left]:!bg-white [&_.ant-table-tbody_>_tr:nth-child(odd)_.ant-table-cell-fix-right]:!bg-[#F5F6F8] [&_.ant-table-tbody_>_tr:nth-child(even)_.ant-table-cell-fix-right]:!bg-white [&_.ant-table-tbody_>_tr:hover_.ant-table-cell-fix-left]:!bg-gray-50 [&_.ant-table-tbody_>_tr:hover_.ant-table-cell-fix-right]:!bg-gray-50 [&_.ant-table-body]:[scrollbar-width:none] [&_.ant-table-body]:[-ms-overflow-style:none] [&_.ant-table-body::-webkit-scrollbar]:[display:none]"})})]}),t(D,{open:S,onClose:()=>{h(!1),b(null)},responsible:j,onSuccess:()=>{h(!1),b(null)}})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,a){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,a),a)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,a){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,a),a)}};export{Z as MonVuzResponsiblePage};
